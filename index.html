<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JoinLSSD</title>
    <style>
        :root {
            --primary-color: #4a674c;
            --primary-light: #e8f5e9;
            --secondary-color: #f5f5f5;
            --background-color: #ffffff;
            --surface-color: #fafafa;
            --border-color: #dddddd;
            --text-color: #333333;
            --text-light: #666666;
            --error-color: #e74c3c;
            --success-color: #27ae60;
            --hover-color: #e0e0e0;
            --copy-btn-bg: #4a674c;
            --copy-btn-hover: #3a523c;
            --copy-btn-text: #ffffff;
        }
        
		body.dark-theme {
            --primary-color: #7cb47e;
            --primary-light: #2c3e2d;
            --secondary-color: #2d2d2d;
            --background-color: #1a1a1a;
            --surface-color: #242424;
            --border-color: #444444;
            --text-color: #e0e0e0;
            --text-light: #a0a0a0;
            --hover-color: #3a3a3a;
            --copy-btn-bg: #7cb47e;
            --copy-btn-hover: #6aa36c;
        }
		
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            z-index: 10000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            max-width: 350px;
            display: flex;
            align-items: center;
        }
        
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        .notification.success {
            background-color: var(--success-color);
            border-left: 4px solid #1e7e34;
        }
        
        .notification.error {
            background-color: var(--error-color);
            border-left: 4px solid #c0392b;
        }
        
        .notification.warning {
            background-color: #f39c12;
            border-left: 4px solid #e67e22;
            color: #fff;
        }
        
        .notification.info {
            background-color: #3498db;
            border-left: 4px solid #2980b9;
        }
        
        .notification-icon {
            margin-right: 10px;
            font-size: 18px;
        }
        
        .notification-close {
            margin-left: 15px;
            cursor: pointer;
            font-weight: bold;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .notification-close:hover {
            opacity: 1;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.5;
            padding: 20px;
            font-size: 14px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: var(--surface-color);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 25px;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 8px;
            font-size: 22px;
            font-weight: 600;
        }
        
        .description {
            color: var(--text-light);
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .form-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .form-section {
            background-color: var(--secondary-color);
            padding: 18px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 3px solid var(--primary-color);
        }
        
        .form-section h2 {
            color: var(--primary-color);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
            font-size: 16px;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 12px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 13px;
            color: var(--text-color);
        }
        
        .hint {
            display: block;
            font-size: 12px;
            color: var(--text-light);
            margin-top: 4px;
            font-style: italic;
        }
        
        input[type="text"],
        input[type="date"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 13px;
            background-color: var(--secondary-color);
            color: var(--text-color);
            transition: border-color 0.2s;
        }
        
        input[type="text"]:focus,
        input[type="date"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        input[type="text"]::placeholder,
        input[type="tel"]::placeholder,
        textarea::placeholder {
            color: var(--text-light);
            opacity: 0.7;
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .radio-group, .checkbox-group {
            margin: 8px 0;
        }
        
        .radio-group label, .checkbox-group label {
            font-weight: normal;
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 13px;
        }
        
        input[type="radio"], input[type="checkbox"] {
            margin-right: 8px;
            accent-color: var(--primary-color);
        }
        
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: background-color 0.2s;
        }
        
        button:hover {
            background-color: #3a523c;
        }
        
        button.secondary {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        button.secondary:hover {
            background-color: var(--hover-color);
        }
        
        .output-container {
            margin-top: 25px;
            padding: 18px;
            background-color: var(--secondary-color);
            border-radius: 6px;
            display: none;
            border-left: 3px solid var(--primary-color);
        }
        
        .output-container h2 {
            margin-bottom: 12px;
            color: var(--primary-color);
            font-size: 16px;
        }
        
        #bbcode-output {
            width: 100%;
            min-height: 250px;
            padding: 12px;
            background-color: #f0f0f0;
            color: #333;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            overflow: auto;
            font-size: 12px;
            line-height: 1.4;
            border: 1px solid var(--border-color);
        }
        
        .copy-btn {
            background-color: var(--copy-btn-bg);
            color: var(--copy-btn-text);
            margin-top: 10px;
        }
        
        .copy-btn:hover {
            background-color: var(--copy-btn-hover);
        }
        
        .required {
            color: var(--error-color);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            overflow-x: auto;
        }
        
        .tab {
            padding: 8px 16px;
            cursor: pointer;
            background-color: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            font-size: 13px;
            color: var(--text-light);
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 500;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .word-count {
            font-size: 12px;
            color: var(--text-light);
            margin-top: 5px;
        }
        
        .word-count.error {
            color: var(--error-color);
        }
        
        .word-count.success {
            color: var(--success-color);
        }
        
        .summary-item {
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed var(--border-color);
        }
        
        .summary-item:last-child {
            border-bottom: none;
        }
        
        .summary-label {
            font-weight: 500;
            color: var(--text-light);
            font-size: 12px;
        }
        
        .summary-value {
            font-size: 13px;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--secondary-color);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .theme-toggle:hover {
            background: var(--hover-color);
        }
        
        .instructions {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-radius: 6px;
            border-left: 3px solid var(--primary-color);
            display: none;
        }
        
        .instructions h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 15px;
        }
        
        .instructions ol {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .instructions a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .instructions a:hover {
            text-decoration: underline;
        }
        
        .topic-title {
            margin-top: 15px;
            padding: 10px;
            background-color: var(--secondary-color);
            border-radius: 4px;
            border: 1px solid var(--border-color);
            font-family: monospace;
            font-size: 13px;
        }
        
        .topic-output {
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-radius: 6px;
            border-left: 3px solid var(--primary-color);
            display: none;
        }
        
        .agreement-text {
            font-size: 12px;
            color: var(--text-light);
            margin-left: 25px;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>    
        
    <div class="container">
        <header style="position: relative;">
            <button class="theme-toggle" id="theme-toggle" style="position: absolute; top: 0; right: 0;">Тёмная тема</button>
            <h1>Генератор заявки в Академию Помощника Шерифа</h1>
            <p class="description">Заполните все поля формы для генерации BB-кода и размещения на форуме</p>
    </header>
    
    <div class="tabs">
        <div class="tab active" data-tab="main">Основная информация</div>
        <div class="tab" data-tab="questions">Основные вопросы</div>
        <div class="tab" data-tab="ooc">OOC информация</div>
        <div class="tab" data-tab="generate">Генерация</div>
    </div>
        
        <form id="application-form">
            <div class="tab-content active" id="main-tab">
                <div class="form-section">
                    <h2>I. ОСНОВНАЯ ИНФОРМАЦИЯ</h2>
                    
                    <div class="form-group">
                        <label for="fullname">Имя Фамилия: <span class="required">*</span></label>
                        <input type="text" id="fullname" name="fullname" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthdate">Дата рождения: <span class="required">*</span></label>
                        <input type="date" id="birthdate" name="birthdate" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="gender">Пол: <span class="required">*</span></label>
                        <select id="gender" name="gender" required>
                            <option value="">Выберите пол</option>
                            <option value="Мужской">Мужской</option>
                            <option value="Женский">Женский</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">Номер телефона: <span class="required">*</span></label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Адрес проживания: <span class="required">*</span></label>
                        <input type="text" id="address" name="address" required>
                    </div>
                </div>
                
                <div class="button-group">
                    <div></div>
                    <button type="button" class="next-tab" data-next="questions">Далее →</button>
                </div>
            </div>
            
            <div class="tab-content" id="questions-tab">
                <div class="form-section">
                    <h2>II. ОСНОВНЫЕ ВОПРОСЫ</h2>
                    
                    <div class="form-group">
                        <label for="ethnicity">Расовая/этническая принадлежность: <span class="required">*</span></label>
                        <input type="text" id="ethnicity" name="ethnicity" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Юридический статус вашего нахождения в страны: <span class="required">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" name="legal_status" value="Я гражданин США;" required> Я гражданин США</label>
                            <label><input type="radio" name="legal_status" value="Я гражданин другого государства со статусом ожидания гражданства и имею право на работу;"> Я гражданин другого государства со статусом ожидания гражданства и имею право на работу</label>
                            <label><input type="radio" name="legal_status" value="Другой вариант"> Другой вариант</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Ваше образование: <span class="required">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" name="education" value="Я окончил(-а) государственную американскую среднюю школу или частную школу, аккредитованную агентством, признанным Министерством образования США;" required> Я окончил(-а) государственную американскую среднюю школу или частную школу</label>
                            <label><input type="radio" name="education" value="Я получил(-а) диплом об общем образовании (GED) или эквивалент в институте США;"> Я получил(-а) диплом об общем образовании (GED)</label>
                            <label><input type="radio" name="education" value="Я не окончил(-а) среднюю школу США или эквивалент, но я получил(-а) 2-летную (ассоциированный) или 4-летнею (бакалавр) степень в колледже или университете, аккreditованных агентством, признанным Министерством образования США;"> Я не окончил(-а) среднюю школу, но имею высшее образование</label>
                            <label><input type="radio" name="education" value="Не один из пунктов выше мне не подходит(нет образования)"> Не один из пунктов выше мне не подходит (нет образования)</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="criminal_history">История Ваших правонарушений (штрафы, аресты, фиксация биометрических данных сотрудниками правоохранительных органов, суды): <span class="required">*</span></label>
                        <textarea id="criminal_history" name="criminal_history" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="licenses">Разрешения и лицензии: <span class="required">*</span></label>
                        <textarea id="licenses" name="licenses" required placeholder="Указать все принадлежащие вам разрешения и лицензии"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="why_you">Почему мы должны взять именно Вас? (Развёрнутый ответ, мин. 70 слов) <span class="required">*</span></label>
                        <textarea id="why_you" name="why_you" required></textarea>
                        <div id="word-count" class="word-count">Слов: 0</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="application_date">Дата: <span class="required">*</span></label>
                        <input type="date" id="application_date" name="application_date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="signature">Подпись: <span class="required">*</span></label>
                        <input type="text" id="signature" name="signature" required>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="secondary prev-tab" data-prev="main">← Назад</button>
                    <button type="button" class="next-tab" data-next="ooc">Далее →</button>
                </div>
            </div>
            
            <div class="tab-content" id="ooc-tab">
                <div class="form-section">
                    <h2>III. OOC Часть</h2>
                    
                    <div class="form-group">
                        <label for="ooc_name">Имя: <span class="required">*</span></label>
                        <input type="text" id="ooc_name" name="ooc_name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="ooc_age">Возраст: <span class="required">*</span></label>
                        <input type="text" id="ooc_age" name="ooc_age" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="timezone">Часовой пояс: <span class="required">*</span></label>
                        <input type="text" id="timezone" name="timezone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="faction_history">Послужной список (фракции, их лидеры, должность и звание, дата и причина ухода): <span class="required">*</span></label>
                        <textarea id="faction_history" name="faction_history" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="vk_link">Ссылка на страницу в ВКонтакте: <span class="required">*</span></label>
                        <input type="text" id="vk_link" name="vk_link" required>
                        <span class="hint">ОБРАТИТЕ ВНИМАНИЕ НА ТО, ЧТО ВАША СТРАНИЦА ДОЛЖНА БЫТЬ ОТКРЫТА</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="forum_link">Ссылка на форумный аккаунт сервера: <span class="required">*</span></label>
                        <input type="text" id="forum_link" name="forum_link" required>
                        <span class="hint">forum.gambit-rp.ru; профиль должен быть открыт</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="screenshot_chars">Полный, необрезанный скриншот из личного кабинета всех персонажей: <span class="required">*</span></label>
                        <input type="text" id="screenshot_chars" name="screenshot_chars" placeholder="Вставить ссылку на скриншот" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="screenshot_2fa">Скриншот-подтверждение включённой двухфакторной аутентификации: <span class="required">*</span></label>
                        <input type="text" id="screenshot_2fa" name="screenshot_2fa" placeholder="Вставить ссылку на скриншот" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="game_profit">Доказательства игры (топики, СС; необязательно из полицейских фракций):</label>
                        <textarea id="game_profit" name="game_profit" placeholder="Необязательное поле"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Имеется ли доступ к TeamSpeak 3?: <span class="required">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" name="teamspeak" value="Да" required> Да</label>
                            <label><input type="radio" name="teamspeak" value="Нет"> Нет</label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Имеется ли возможность беспрепятственно общаться в нём?: <span class="required">*</span></label>
                        <div class="radio-group">
                            <label><input type="radio" name="teamspeak_communication" value="Да" required> Да</label>
                            <label><input type="radio" name="teamspeak_communication" value="Нет"> Нет</label>
                        </div>
                        <span class="hint">Микрофон, либо возможность покупки TeamSpeak 3 на телефон, главное чтобы могли общаться в TS3</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="character_story">Квента персонажа: <span class="required">*</span></label>
                        <textarea id="character_story" name="character_story" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <label><input type="checkbox" id="agreement" name="agreement" required> <span class="required">*</span> Я подтверждаю согласие с условиями</label>
                        </div>
                        <div class="agreement-text">
                            Отправляя данную заявку, я соглашаюсь с тем, что ознакомлен с правилами приёма во фракцию Los Santos County Sheriff's Departament. Я понимаю, что если покину фракцию в течении 20 дней, после получения инвайта на игрового персонажа, то я могу не получить статус "Retired", что повлияет на моё будущее восстановление во фракцию. В случае слива информации с форума SA-ES/официального Discord сервера фракции я буду занесён в Чёрный список SA-ES. После одобрения моей заявки я обязуюсь изучить всю информацию на форуме, включая мануал и правила фракции, и понимаю, что могу быть уволен за несоблюдение правил фракции.<br><br>
                            Всё вышеуказанное мной является абсолютной правдой, на которую соглашался лично я. В случае, если это неправда - я осознаю, что могу получить чёрный список фракции.
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="secondary prev-tab" data-prev="questions">← Назад</button>
                    <button type="button" class="next-tab" data-next="generate">Сгенерировать BB-код</button>
                </div>
            </div>
            
            <div class="tab-content" id="generate-tab">
                <div class="form-section">
                    <h2>Проверьте данные перед генерацией</h2>
                    <p>Убедитесь, что все поля заполнены правильно. После генерации BB-кода вы сможете скопировать его для размещения на форуме.</p>
                    
                    <div id="summary"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="secondary prev-tab" data-prev="ooc">← Назад</button>
                    <button type="button" id="generate-btn">Сгенерировать BB-код</button>
                </div>
                
                <div class="topic-output" id="topic-output">
                    <h2>НАЗВАНИЕ ТЕМЫ</h2>
                    <p>Скопируйте название темы ниже:</p>
                    <div class="topic-title" id="topic-title">Заявка в Академию LSSD - [Ваше Имя Фамилия]</div>
                    <button type="button" id="copy-title-btn" class="copy-btn">Копировать название темы</button>
                </div>
                
                <div class="output-container">
                    <h2>Сгенерированный BB-код</h2>
                    <p>Скопируйте код ниже и разместите его на форуме:</p>
                    <pre id="bbcode-output"></pre>
                    <button type="button" id="copy-btn" class="copy-btn">Копировать BB-код</button>
                </div>
                
                <div class="instructions" id="instructions">
                    <h3>Инструкция по размещению заявки на форуме:</h3>
                    <ol>
                        <li>Скопируйте название темы выше</li>
                        <li>Перейдите на <a href="https://sa-es.su/forums/195/" target="_blank">форум СА-ЕС</a></li>
                        <li>Нажмите кнопку "Новая тема"</li>
                        <li>Вставьте название темы в поле "Название темы"</li>
                        <li>В появившемся окне редактора вставьте скопированный BB-код</li>
                        <li>Нажмите кнопку "Создать тему" для публикации заявки</li>
                    </ol>
                </div>
            </div>
        </form>
    </div>

    <div id="notification-container"></div>

    <script>
        function showNotification(message, type = 'info', duration = 5000) {
            const container = document.getElementById('notification-container');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'ℹ️';
            if (type === 'success') icon = '✅';
            if (type === 'error') icon = '❌';
            if (type === 'warning') icon = '⚠️';
            
            notification.innerHTML = `
                <span class="notification-icon">${icon}</span>
                <span class="notification-message">${message}</span>
                <span class="notification-close">&times;</span>
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            const closeBtn = notification.querySelector('.notification-close');
            closeBtn.addEventListener('click', () => {
                hideNotification(notification);
            });
            
            if (duration > 0) {
                setTimeout(() => {
                    hideNotification(notification);
                }, duration);
            }
            
            return notification;
        }
        
        function hideNotification(notification) {
            notification.classList.remove('show');
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }
        
        function showSuccess(message, duration = 5000) {
            return showNotification(message, 'success', duration);
        }
        
        function showError(message, duration = 5000) {
            return showNotification(message, 'error', duration);
        }
        
        function showWarning(message, duration = 5000) {
            return showNotification(message, 'warning', duration);
        }
        
        function showInfo(message, duration = 5000) {
            return showNotification(message, 'info', duration);
        }

        document.addEventListener('DOMContentLoaded', function() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(tc => tc.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            document.querySelectorAll('.next-tab').forEach(button => {
                button.addEventListener('click', () => {
                    const nextTab = button.getAttribute('data-next');
                    document.querySelector(`.tab[data-tab="${nextTab}"]`).click();
                });
            });
            
            document.querySelectorAll('.prev-tab').forEach(button => {
                button.addEventListener('click', () => {
                    const prevTab = button.getAttribute('data-prev');
                    document.querySelector(`.tab[data-tab="${prevTab}"]`).click();
                });
            });
            
            const whyYouTextarea = document.getElementById('why_you');
            const wordCount = document.getElementById('word-count');
            
            whyYouTextarea.addEventListener('input', () => {
                const text = whyYouTextarea.value.trim();
                const words = text === '' ? 0 : text.split(/\s+/).length;
                wordCount.textContent = `Слов: ${words}`;
                
                if (words < 70) {
                    wordCount.classList.add('error');
                    wordCount.classList.remove('success');
                } else {
                    wordCount.classList.remove('error');
                    wordCount.classList.add('success');
                }
            });
            
            document.getElementById('generate-btn').addEventListener('click', function() {
                const requiredFields = document.querySelectorAll('[required]');
                let allFilled = true;
                
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        allFilled = false;
                        field.style.borderColor = 'var(--error-color)';
                    } else {
                        field.style.borderColor = '';
                    }
                });
                
                const agreementCheckbox = document.getElementById('agreement');
                if (!agreementCheckbox.checked) {
                    showError('Вы должны подтвердить согласие с условиями перед генерацией заявки!');
                    document.querySelector('.tab[data-tab="ooc"]').click();
                    agreementCheckbox.style.outline = '2px solid var(--error-color)';
                    return;
                } else {
                    agreementCheckbox.style.outline = '';
                }
                
                const whyYouWords = document.getElementById('why_you').value.trim().split(/\s+/).length;
                if (whyYouWords < 70) {
                    showError('Ответ на вопрос "Почему мы должны взять именно Вас?" должен содержать не менее 70 слов!');
                    document.querySelector('.tab[data-tab="questions"]').click();
                    return;
                }
                
                if (!allFilled) {
                    showError('Пожалуйста, заполните все обязательные поля (отмечены красным)');
                    return;
                }
                
                const formData = new FormData(document.getElementById('application-form'));
                
                const appDate = new Date(formData.get('application_date'));
                const formattedDate = `${appDate.getDate().toString().padStart(2, '0')}/${(appDate.getMonth() + 1).toString().padStart(2, '0')}/${appDate.getFullYear()}`;
                
                const today = new Date();
                const month = (today.getMonth() + 1).toString().padStart(2, '0');
                const day = today.getDate().toString().padStart(2, '0');
                const datePrefix = `[${month}-${day}]`;
                
                const fullName = formData.get('fullname');
                document.getElementById('topic-title').textContent = `${datePrefix} ${fullName}`;
                
                document.getElementById('topic-output').style.display = 'block';
                
                let bbcode = `[groups=8][box=#FFFFFF]\n\n[/box][box=#FFFFFF]\n\n[INDENT=3][IMG]https://i.imgur.com/aGHQgq3.png[/IMG][/INDENT]\n\n[CENTER]\n\n\n\n[color=#000000][B]КОМАНДЫВАНИЮ ПЕРСОНАЛОМ ЛССД\n\nТРЕНИРОВОЧНОЕ БЮРО\n\nАКАДЕМИЯ ПОМОЩНИКА ШЕРИФА[/color][/B][/CENTER]\n\n\n\n[box=#717f62]\n\nI. ОСНОВНАЯ ИНФОРМАЦИЯ\n\nИмя Фамилия:\n\n[a]${formData.get('fullname')}[/a]\n\n\n\nДата рождения:\n\n[a]${formData.get('birthdate')}[/a]\n\n\n\nПол:\n\n[a]${formData.get('gender')}[/a]\n\n\n\nНомер телефона:\n\n[a]${formData.get('phone')}[/a]\n\n\n\nАдрес проживания:\n\n[a]${formData.get('address')}[/a]\n\n\n\nII. ОСНОВНЫЕ ВОПРОСЫ\n\nРасовая/этническая принадлежность:\n\n[a]${formData.get('ethnicity')}[/a]\n\n\n\nЮридический статус вашего нахождения в стране (оставить один пункт):\n\n[a]${formData.get('legal_status')}[/a][a][/a]\n\n\n\nВаше образование (оставить один пункт):\n\n[a]${formData.get('education')}[/a][a][/a]\n\n\n\nИстория Ваших правонарушений (штрафы, аресты, фиксация биометрических данных сотрудниками правоохранительных органов, суды):\n\n[a]${formData.get('criminal_history')}[/a]\n\n\n\nРазрешения и лицензии:\n\n[a]${formData.get('licenses')}[/a]\n\n\n\nПочему мы должны взять именно Вас? (Развёрнутый ответ, мин. 70 слов)\n\n[a]${formData.get('why_you')}[/a]\n\n\n\n\n\nДата: ${formattedDate}\n\nПодпись: ${formData.get('signature')}\n\n\n\n\n\n(( III. OOC Часть ))\n\n\n\nИмя\n\n[a]${formData.get('ooc_name')}[/a]\n\nВозраст\n\n[a]${formData.get('ooc_age')}[/a]\n\nЧасовой пояс\n\n[a]${formData.get('timezone')}[/a]\n\nПослужной список (фракции, их лидеры, должность и звание, дата и причина ухода)\n\n[a]${formData.get('faction_history')}[/a]\n\n\n\nСсылка на страницу в ВКонтакте (ОБРАТИТЕ ВНИМАНИЕ НА ТО, ЧТО ВАША СТРАНИЦА ДОЛЖНА БЫТЬ ОТКРЫТА)\n\n[a]${formData.get('vk_link')}[/a]\n\nCcылка на форумный аккаунт сервера (forum.gambit-rp.ru; профиль должен быть открыт)\n\n[a]${formData.get('forum_link')}[/a]\n\nПолный, необрезанный скриншот из личного кабинета всех персонажей на сервере Gambit RP\n\n[a]${formData.get('screenshot_chars')}[/a]\n\nСкриншот-подтверждение включённой двухфакторной аутентификации:\n\n[a]${formData.get('screenshot_2fa')}[/a]\n\nДоказательства игры (топики, СС; необязательно из полицейских фракций):\n\n[a]${formData.get('game_profit') || 'Не предоставлено'}[/a]\n\n\n\nИмеется ли доступ к TeamSpeak 3?:\n\n[a]${formData.get('teamspeak')}[/a]\n\n\n\nИмеется ли возможность беспрепятственно общатся в нём(микрофон, либо возможность покупки TeamSpeak 3 на телефон, главное чтобы могли общаться в TS3)?\n\n[a]${formData.get('teamspeak_communication')}[/a]\n\n\n\nКвента персонажа:\n\n[a]${formData.get('character_story')}[/a]\n\n\n\n[hr][/hr]\n\n(( Отправляя данную заявку, я соглашаюсь с тем, что ознакомлен с правилами приёма во фракцию Los Santos County Sheriff's Departament. Я понимаю, что если покину фракцию в течении 20 дней, после получения инвайта на игрового персонажа, то я могу не получить статус "Retired", что повлияет на моё будущее восстановление во фракцию. В случае слива информации с форума SA-ES/официального Discord сервера фракции я буду занесён в Чёрный список SA-ES. После одобрения моей заявки я обязуюсь изучить всю информацию на форуме, включая мануал и правила фракции, и понимаю, что могу быть уволен за несоблюдение правил фракции. ))\n\n\n\n(( Всё вышеуказанное мной является абсолютной правдой, на которую соглашался лично я. В случае, если это неправда - я осознаю, что могу получить чёрный список фракции. ))\n\n[/box]\n\n[/box][/groups]`;
                
                document.getElementById('bbcode-output').textContent = bbcode;
                document.querySelector('.output-container').style.display = 'block';
                document.getElementById('instructions').style.display = 'block';
                
                document.querySelector('.output-container').scrollIntoView({ behavior: 'smooth' });
            });
            
            document.getElementById('copy-btn').addEventListener('click', function() {
                const bbcodeOutput = document.getElementById('bbcode-output');
                navigator.clipboard.writeText(bbcodeOutput.textContent).then(() => {
                    const originalText = this.textContent;
                    this.textContent = 'Скопировано!';
                    showSuccess('BB-код успешно скопирован в буфер обмена!');
                    setTimeout(() => {
                        this.textContent = originalText;
                    }, 2000);
                });
            });
            
            document.getElementById('copy-title-btn').addEventListener('click', function() {
                const topicTitle = document.getElementById('topic-title');
                navigator.clipboard.writeText(topicTitle.textContent).then(() => {
                    const originalText = this.textContent;
                    this.textContent = 'Скопировано!';
                    showSuccess('Название темы успешно скопировано в буфер обмена!');
                    setTimeout(() => {
                        this.textContent = originalText;
                    }, 2000);
                });
            });
            
            document.getElementById('theme-toggle').addEventListener('click', function() {
                if (document.body.classList.contains('dark-theme')) {
                    document.body.classList.remove('dark-theme');
                    this.textContent = 'Тёмная тема';
                } else {
                    document.body.classList.add('dark-theme');
                    this.textContent = 'Светлая тема';
                }
            });
        });
    </script>
</body>
</html>
